<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Webkomponente Metadata Extraktion</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 24px;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      padding: 48px;
    }
    h1 { color: #333; margin-bottom: 16px; font-size: 36px; }
    h2 { color: #1976d2; margin: 32px 0 16px; font-size: 24px; }
    .subtitle { color: #666; font-size: 18px; margin-bottom: 32px; }
    .step {
      background: #f5f5f5;
      padding: 24px;
      border-radius: 8px;
      margin: 24px 0;
      border-left: 4px solid #1976d2;
    }
    .step-number {
      display: inline-block;
      width: 32px;
      height: 32px;
      background: #1976d2;
      color: white;
      border-radius: 50%;
      text-align: center;
      line-height: 32px;
      font-weight: bold;
      margin-right: 12px;
    }
    .btn {
      display: inline-block;
      padding: 16px 32px;
      background: #1976d2;
      color: white;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 4px 12px rgba(25,118,210,0.3);
      text-decoration: none;
      margin: 8px 0;
    }
    .btn:hover {
      background: #1565c0;
      transform: translateY(-2px);
    }
    .btn-success { background: #4caf50; }
    .btn-success:hover { background: #43a047; }
    .code-box {
      background: #2d2d2d;
      color: #f8f8f2;
      padding: 16px;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      overflow-x: auto;
      margin: 16px 0;
      max-height: 200px;
      overflow-y: auto;
    }
    .warning {
      background: #fff3cd;
      border: 1px solid #ffc107;
      border-radius: 8px;
      padding: 16px;
      margin: 16px 0;
    }
    .success {
      background: #d4edda;
      border-color: #28a745;
    }
    .test-section {
      background: #e3f2fd;
      padding: 24px;
      border-radius: 8px;
      margin: 24px 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üìù Metadata Extraktion - Bookmarklet</h1>
    <p class="subtitle">üåê Live auf Netlify - Installation in 3 einfachen Schritten</p>

    <!-- Step 1 -->
    <div class="step">
      <h3><span class="step-number">1</span>Neues Lesezeichen erstellen</h3>
      <p style="margin-top: 12px;">Machen Sie einen Rechtsklick auf Ihre Lesezeichen-Leiste und w√§hlen Sie <strong>"Neues Lesezeichen hinzuf√ºgen"</strong></p>
    </div>

    <!-- Step 2 -->
    <div class="step">
      <h3><span class="step-number">2</span>Namen eingeben</h3>
      <p style="margin-top: 12px;">Name: <strong>Metadata Extraktion</strong></p>
    </div>

    <!-- Step 3 -->
    <div class="step">
      <h3><span class="step-number">3</span>JavaScript-Code kopieren</h3>
      <p style="margin-top: 12px;">Kopieren Sie diesen Code in das <strong>"URL"</strong>-Feld des Lesezeichens:</p>
      
      <div class="code-box" id="bookmarkletCode">javascript:(function()%7Bif(window.MCanvas)%7BMCanvas.open()%3Breturn%7Dconst%20d%3Ddocument%3Bconst%20container%3Dd.createElement('div')%3Bcontainer.id%3D'mc-c'%3Bcontainer.style.cssText%3D'position%3Afixed%3Btop%3A0%3Bright%3A-900px%3Bwidth%3A900px%3Bheight%3A100vh%3Bbackground%3Awhite%3Bbox-shadow%3A-4px%200%2016px%20rgba(0%2C0%2C0%2C.2)%3Bz-index%3A999999%3Btransition%3Aright%20.3s'%3Bconst%20iframe%3Dd.createElement('iframe')%3Biframe.src%3D'https%3A%2F%2Fmetadata-agent-canvas.vercel.app%2F%3Fmode%3Dbookmarklet'%3Biframe.style.cssText%3D'width%3A100%25%3Bheight%3A100%25%3Bborder%3Anone'%3Bcontainer.appendChild(iframe)%3Bd.body.appendChild(container)%3Bconst%20button%3Dd.createElement('button')%3Bbutton.innerHTML%3D'%F0%9F%93%9D'%3Bbutton.style.cssText%3D'position%3Afixed%3Bbottom%3A24px%3Bright%3A24px%3Bwidth%3A56px%3Bheight%3A56px%3Bborder-radius%3A50%25%3Bbackground%3A%230062ac%3Bcolor%3Awhite%3Bborder%3Anone%3Bfont-size%3A24px%3Bcursor%3Apointer%3Bbox-shadow%3A0%204px%2012px%20rgba(0%2C0%2C0%2C.3)%3Bz-index%3A999998'%3Bbutton.onclick%3Dfunction()%7Bcontainer.style.right%3Dcontainer.style.right%3D%3D%3D'0px'%3F'-900px'%3A'0'%7D%3Bd.body.appendChild(button)%3Bconst%20sendData%3Dfunction()%7Bif(!iframe.contentWindow)%7BsetTimeout(sendData%2C200)%3Breturn%7Dconst%20getMeta%3Dfunction(name)%7Bconst%20el%3Dd.querySelector('meta%5Bname%3D%22'%2Bname%2B'%22%5D')%7C%7Cd.querySelector('meta%5Bproperty%3D%22'%2Bname%2B'%22%5D')%3Breturn%20el%3Fel.getAttribute('content')%3Anull%7D%3Blet%20text%3D'Titel%3A%20'%2Bd.title%2B'%5Cn%5CnURL%3A%20'%2Bwindow.location.href%2B'%5Cn%5Cn'%3Bconst%20desc%3DgetMeta('description')%3Bconst%20author%3DgetMeta('author')%3Bconst%20keywords%3DgetMeta('keywords')%3Bconst%20ogTitle%3DgetMeta('og%3Atitle')%3Bconst%20ogDesc%3DgetMeta('og%3Adescription')%3Bconst%20ogType%3DgetMeta('og%3Atype')%3Bif(desc)text%2B%3D'Beschreibung%3A%20'%2Bdesc%2B'%5Cn%5Cn'%3Bif(author)text%2B%3D'Autor%3A%20'%2Bauthor%2B'%5Cn%5Cn'%3Bif(keywords)text%2B%3D'Keywords%3A%20'%2Bkeywords%2B'%5Cn%5Cn'%3Bif(ogTitle%7C%7CogDesc)%7Btext%2B%3D'---%20OpenGraph%20---%5Cn'%3Bif(ogTitle)text%2B%3D'Title%3A%20'%2BogTitle%2B'%5Cn'%3Bif(ogType)text%2B%3D'Type%3A%20'%2BogType%2B'%5Cn'%3Bif(ogDesc)text%2B%3D'Description%3A%20'%2BogDesc%2B'%5Cn'%3Btext%2B%3D'%5Cn'%7Dconst%20selectors%3D%5B'main'%2C'article'%2C'%5Brole%3D%22main%22%5D'%2C'.main-content'%2C'%23content'%5D%3Blet%20mainContent%3D''%3Bfor(let%20i%3D0%3Bi%3Cselectors.length%3Bi%2B%2B)%7Bconst%20el%3Dd.querySelector(selectors%5Bi%5D)%3Bif(el)%7BmainContent%3D(el.innerText%7C%7Cel.textContent).substring(0%2C5000)%3Bbreak%7D%7Dif(!mainContent)mainContent%3Dd.body.innerText.substring(0%2C5000)%3Btext%2B%3D'---%20Seiteninhalt%20---%5Cn'%2BmainContent.substring(0%2C2000).trim()%2B'%5Cn%5Cn'%3Btry%7Biframe.contentWindow.postMessage(%7Btype%3A'SET_PAGE_DATA'%2Ctext%3Atext%2Curl%3Awindow.location.href%2CpageTitle%3Ad.title%2Cmode%3A'bookmarklet'%2CpageData%3A%7Burl%3Awindow.location.href%2Ctitle%3Ad.title%2Cmeta%3A%7Bdescription%3Adesc%2Cauthor%3Aauthor%2Ckeywords%3Akeywords%7D%2CopenGraph%3A%7Btitle%3AogTitle%2Cdescription%3AogDesc%2Ctype%3AogType%7D%2CmainContent%3AmainContent%7D%7D%2C'*')%3Bconsole.log('Daten%20gesendet%20mit%20'%2BmainContent.length%2B'%20Zeichen%20Inhalt')%7Dcatch(e)%7Bconsole.error('Fehler%3A'%2Ce)%7D%7D%3Bwindow.MCanvas%3D%7Bopen%3Afunction()%7Bcontainer.style.right%3D'0'%3BsendData()%7D%2Cclose%3Afunction()%7Bcontainer.style.right%3D'-900px'%3BsetTimeout(function()%7Bcontainer.remove()%3Bbutton.remove()%7D%2C300)%7D%7D%3Bwindow.addEventListener('message'%2Cfunction(e)%7Bif(e.data%26%26e.data.type%3D%3D%3D'CANVAS_CLOSE')%7Bconsole.log('Schlie%C3%9Fe%20Sidebar')%3BMCanvas.close()%7D%7D)%3BsetTimeout(function()%7Bcontainer.style.right%3D'0'%3BsetTimeout(sendData%2C1500)%7D%2C100)%7D)()%3B%0A</div>
      
      <button class="btn" onclick="copyCode()">üìã Code kopieren</button>
      <span id="copyStatus" style="margin-left: 12px; color: #4caf50; display: none;">‚úÖ Kopiert!</span>
    </div>

    <div class="success warning">
      <strong>‚úÖ Fertig!</strong><br>
      Jetzt k√∂nnen Sie das Lesezeichen auf jeder Webseite verwenden!
    </div>

    <!-- Test Section -->
    <h2>üß™ Testen</h2>
    <div class="test-section">
      <p><strong>Direkter Test (ohne Lesezeichen):</strong></p>
      <p style="margin: 12px 0;">Klicken Sie diesen Button um die Webkomponente direkt auf dieser Seite zu testen:</p>
      <button class="btn btn-success" onclick="testCanvas()">‚ñ∂Ô∏è Metadaten Extraktion hier testen</button>
    </div>

    <div class="success warning">
      <strong>‚úÖ Live auf Vercel!</strong><br>
      Das Canvas l√§uft auf: <strong>https://metadata-agent-canvas.vercel.app/</strong><br>
      <small style="margin-top: 8px; display: inline-block;">Funktioniert auf allen HTTPS-Seiten! üöÄ</small>
    </div>

    <h2>üìñ Verwendung</h2>
    <div class="step">
      <ol style="margin-left: 20px; line-height: 2;">
        <li>√ñffnen Sie eine beliebige Webseite (z.B. Wikipedia, YouTube, etc.)</li>
        <li>Klicken Sie auf das Lesezeichen "Metadata Extraktion"</li>
        <li>Die Webkomponente √∂ffnet sich rechts als Sidebar</li>
        <li>Webseiteninfos werden automatisch ins Textfeld kopiert</li>
        <li>Button rechts unten (üìù) zum √ñffnen/Schlie√üen</li>
      </ol>
    </div>

    <h2>üì¶ Was wird extrahiert?</h2>
    <div class="step">
      <p style="margin-bottom: 16px; color: #555;">
        <strong>Das Bookmarklet ist jetzt vollst√§ndig kompatibel mit dem Browser-Plugin und extrahiert:</strong>
      </p>
      <ul style="margin-left: 20px; line-height: 2;">
        <li><strong>Standard Meta-Tags:</strong> Titel, Beschreibung, Autor, Keywords, Sprache, Copyright</li>
        <li><strong>OpenGraph:</strong> Titel, Beschreibung, Bild, Typ, Locale, Site Name</li>
        <li><strong>Twitter Cards:</strong> Card Type, Titel, Beschreibung, Bild</li>
        <li><strong>Dublin Core (DC):</strong> Title, Creator, Subject, Description, Date, Type, Format, Language, Rights</li>
        <li><strong>LRMI (Learning Resources):</strong> Educational Use, Educational Level, Learning Resource Type, Time Required</li>
        <li><strong>JSON-LD:</strong> Vollst√§ndige strukturierte Daten (Schema.org, Events, Products, Courses, etc.)</li>
        <li><strong>Schema.org Microdata:</strong> Itemscope-Markup mit Typ-Informationen</li>
        <li><strong>Lizenz-Informationen:</strong> CC-Lizenzen, Copyright, rel="license" Links</li>
        <li><strong>Breadcrumbs:</strong> Navigation & Hierarchie (wichtig f√ºr Fach-Zuordnung)</li>
        <li><strong>Tags & Kategorien:</strong> rel="tag", article:tag, .tags Container</li>
        <li><strong>Canonical URL:</strong> Kanonische URL-Referenz</li>
        <li><strong>Seiteninhalt:</strong> Hauptbereich (main/article) mit bis zu 5000 Zeichen</li>
      </ul>
      <p style="margin-top: 16px; padding: 12px; background: #e3f2fd; border-left: 4px solid #2196f3; border-radius: 4px;">
        <strong>‚ú® Neu:</strong> Das Bookmarklet extrahiert jetzt dieselben Metadaten wie das Browser-Plugin! 
        Besonders wichtig f√ºr Bildungsressourcen sind die <strong>Dublin Core</strong> und <strong>LRMI</strong> Metadaten.
      </p>
      <p style="margin-top: 12px; color: #666;">
        üí° <strong>Tipp:</strong> Besonders effektiv auf:
        <br>‚Ä¢ Bildungsplattformen (LRMI-Metadaten)
        <br>‚Ä¢ Bibliotheks-Webseiten (Dublin Core)
        <br>‚Ä¢ Event-Webseiten (JSON-LD Events)
        <br>‚Ä¢ E-Learning-Seiten (Educational Metadata)
        <br>‚Ä¢ Artikel mit Schema.org-Markup
      </p>
    </div>
  </div>

  <script>
    function copyCode() {
      const code = document.getElementById('bookmarkletCode').textContent;
      navigator.clipboard.writeText(code).then(() => {
        const status = document.getElementById('copyStatus');
        status.style.display = 'inline';
        setTimeout(() => status.style.display = 'none', 3000);
      });
    }

    function testCanvas() {
      const encoded = document.getElementById('bookmarkletCode').textContent;
      const decoded = decodeURIComponent(encoded.replace('javascript:', ''));
      eval(decoded);
    }
  </script>
</body>
</html>
